# View

---

정의

- 뷰는 테이블과 유사하지만, 실제 데이터가 없는 가상의 테이블
- 직접 테이블에 접근하는 것이 아닌, 테이블에서 사용자가 필요한 부분만 선택하여 만들어 놓은 데이터 집합
- 데이터베이스에서 존재하는 일종의 가상 테이블

사용 용도

1. 사용자에게 접근이 허용된 자료만을 제한적으로 보여주기 위해, 하나 이상의 기본 테이블로부터 유도된, 이름을 가지는 가상 테이블
2. 저장장치 내에 물리적으로 존재하지 않지만, 사용자에게 있는 것처럼 간주됨
3. 데이터 보정 작업, 처리과정 시험 등 임시적인 작업을 위한 용도로 활용됨
4. 조인문의 사용 최소화로 사용상의 편의성을 최대화함

특징

1. 기본 테이블로부터 유도된 테이블이기 때문에, 기본 테이블과 같은 형태의 구조를 사용하며, 조작도 기본 테이블과 거의 같음
2. 가상 테이블이기 때문에 물리적으로 구현되어 있지 않음
3. 데이터의 논리적 독립성을 제공할 수 있음
4. 필요한 데이터만 뷰로 정의해서 처리할 수 있기 때문에 관리가 용이하고 명령문이 간단해짐
5. 뷰를 통해서만 데이터에 접근하게 하면, 뷰에 나타나지 않는 데이터를 안전하게 보호하는 효율적인 기법으로 사용할 수 있음
6. 기본 테이블의 기본키를 포함한 속성(열) 집합으로 뷰를 구성해야지만 삽입, 삭제, 갱신, 연산이 가능함
7. 정의된 뷰는 다른 뷰의 정의에 기초가 될 수 있음
8. 뷰가 정의된 기본 테이블이나 뷰를 삭제하면, 해당 테이블이나 뷰를 기초로 정의된 다른 뷰도 자동으로 삭제됨

장점

1. 논리적 데이터 독립성을 제공함
2. 동일 데이터에 대해 동시에 여러 사용자의 상이한 응용이나 요구를 지원해줌
3. 사용자의 데이터 관리를 간단하게 해줌
4. 접근 제어를 통한 자동 보안이 제공됨

단점

1. 독립적인 인덱스를 가질 수 없음
2. ALTER VIEW를 사용할 수 없으며, 뷰의 정의를 변경할 수 없음
3. 뷰로 구성된 내용에 대한 삽입, 삭제, 갱신,연산에 제약이 따름

MYSQL View 명령어

``` sql
//단일 테이블의 필요한 필드만 조회하는 뷰 생성 명령어

CREATE VIEW 뷰이름 AS SELECT 필드이름1, 필드이름2, ... FROM 테이블이름 WHERE 조건;

//여러 테이블의 필요한 필드를 조회하는 뷰 생성 명령어

CREATE VIEW 뷰이름 AS SELECT A.필드이름1, B.필드이름1, ... FROM 테이블이름 AS A, 테이블이름 AS B WHERE 조건;

//VIEW 호출 명령어
SELECT * FROM 뷰이름;

//VIEW 삭제 명령어
DROP VIEW 뷰이름;
```

ORACLE View 명령어

``` sql
//뷰 수정 및 생성 명령어
CREATE OR REPLACE VIEW 뷰이름 AS SELECT 필드이름1, 필드이름2, ... FROM 테이블이름 WHERE 조건;

//뷰 호출 명령어
SELECT * FROM 뷰이름;

//뷰 삭제 명령어
DROP VIEW 뷰이름;
```

PostgreSQL 뷰 명령어

``` sql
//뷰 생성 명령어
CREATE VIEW 뷰이름 AS SELECT 필드이름1,필드이름2, ... FROM 테이블이름 WHERE 조건;

//뷰 호출 명령어
SELECT * FROM 뷰이름;

//뷰 삭제 명령어
DROP VIEW 뷰이름;
```

Material View(MView)

- 오라클에서 존재하는 MView

특징

- 오라클에 존재하는 구체화 뷰로, 일반 뷰와 달리 Data가 일정 공간을 차지하며 물리적으로 존재하는 테이블
- 집계 함수를 사용하는 대용량의 데이터를 처리하는 쿼리에 대해 수행 속도 향상을 목적으로, 쿼리의 결과만큼 새로운 테이블을 생성해 놓는 방법임
- 자주 사용되는 View의 결과를 디스크에 저장하여 쿼리 속도로 향상 시키는 개념
- 일반 View에 비해 수행 속도를 증가시킬 수 있으며, SQL 응용 프로그램에서 MView 사용 시 DBA는 프로그램에 영향을 끼치지 않고 언제든지 생성 및 제거가 가능함
- 실행의 결과 행과 뷰 정의 모두 저장되고, 실행 결과 행으로 만들어진 테이블은 일정 공간을 차지하게 됨

![11.png](image%2F11.png)

- BUILD IMMEDIATE : MView 생성과 동시에 데이터들도 생성되는 옵션

- BUILD DEFERRED : MView 생성은 하지만, 그 안의 데이터는 추후에 생성하도록 하는 기능. MView 생성 시 BUILD IMMEDIATE 대신 BUILD DEFERRED 옵션을 사용하면 조회되는
  데이터 없음

- BUILD IMMEDIATE REFRESH : MView가 생성되자마자 바로 실행 가능한 상태가 됩니다. REFRESH 절은 아래에 정의된 AS 절에서 사용된 SELECT 문내의 원본 테이블의 데이터가 변경되면
  구체화된 뷰를 언제 변경할 것인지에 대한 일정을 결정합

``` sql

CREATE MATERIALIZED VIEW VIEW_NAME

BUILD IMMEDIATE[DEFERRED] REFRESH[FAST]

[COMPLETE]

[FORCE]

[NEVER]

ENABLE QUERY REWRITE

AS

-- SELECT 구문
```

<br/>

Reference

https://jokerkwu.tistory.com/138

https://coding-factory.tistory.com/224

https://m.blog.naver.com/dnjswls23/222280335211